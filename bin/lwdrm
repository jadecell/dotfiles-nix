#!/usr/bin/env sh

# Run the current script as root with all the arguments if not already being ran as root
if [ "$(id -u)" -ne "0" ]; then exec sudo "$0" "$@"; fi

sed -i -e 's/^defaultPref(\"media.eme.enabled\",\ false)\;/\/\/\ defaultPref(\"media.eme.enabled\",\ false)\;/g ; s/^defaultPref(\"media.gmp-provider.enabled\",\ false)\;/\/\/\ defaultPref(\"media.gmp-provider.enabled\",\ false)\;/g ; s/^defaultPref(\"media.gmp-manager.url\",\ \"data:text\/plain\,")\;/\/\/\ defaultPref(\"media.gmp-manager.url\",\ \"data:text\/plain\,")\;/g ; s/^defaultPref(\"media.gmp-manager.url.override\",\ \"data:text\/plain\,")\;/\/\/\ defaultPref(\"media.gmp-manager.url.override\",\ \"data:text\/plain\,")\;/g ; s/^defaultPref(\"media.gmp-manager.updateEnabled\",\ false)\;/\/\/\ defaultPref(\"media.gmp-manager.updateEnabled\",\ false)\;/g ; s/^defaultPref(\"media.gmp.trial-create.enabled\",\ false)\;/\/\/\ defaultPref(\"media.gmp.trial-create.enabled\",\ false)\;/g ; s/^defaultPref(\"media.gmp-widevinecdm.visible\",\ false)\;/\/\/\ defaultPref(\"media.gmp-widevinecdm.visible\",\ false)\;/g ; s/^defaultPref(\"media.gmp-widevinecdm.enabled\",\ false)\;/\/\/\ defaultPref(\"media.gmp-widevinecdm.enabled\",\ false)\;/g ; s/^defaultPref(\"media.gmp-widevinecdm.autoupdate\",\ false)\;/\/\/\ defaultPref(\"media.gmp-widevinecdm.autoupdate\",\ false)\;/g ; s/^defaultPref(\"media.gmp-gmpopenh264.enabled\",\ false)\;/\/\/\ defaultPref(\"media.gmp-gmpopenh264.enabled\",\ false)\;/g ; s/^defaultPref(\"media.gmp-gmpopenh264.autoupdate\",\ false)\;/\/\/\ defaultPref(\"media.gmp-gmpopenh264.autoupdate\",\ false)\;/g ; s/^defaultPref(\"media.peerconnection.video.enabled\",\ false)\;/\/\/\ defaultPref(\"media.peerconnection.video.enabled\",\ false)\;/g ; s/^defaultPref(\"media.gmp-eme-adobe.enabled\",\ false)\;/\/\/\ defaultPref(\"media.gmp-eme-adobe.enabled\",\ false)\;/g ; s/^defaultPref(\"media.gmp-manager.certs.2.commonName\",\ \"\")\;/\/\/\ defaultPref(\"media.gmp-manager.certs.2.commonName\",\ \"\")\;/g ; s/^defaultPref(\"media.gmp-manager.certs.1.commonName\",\ \"\")\;/\/\/\ defaultPref(\"media.gmp-manager.certs.1.commonName\",\ \"\")\;/g' /usr/lib/librewolf/librewolf.cfg
